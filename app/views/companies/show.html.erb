<%=render 'paginate'%>
<div class="container">
    <div class="row">
        <h2 class="text-center mt-4"><%= @company.name %>'s Profile</h2>
        <div class="col-4 text-center mt-4 " style="top:50%; bottom:50">
            <%= find_image @company, size:100%>
        </div>     
        <div class="col-8 text-center">
            <div class="row justify-content-md-center ">
                <div class="col-8 mt-4">
                    <div class="card text-center shadow mb-5 bg-white rounded">
                        <div class="card-header ">
                            <h5 class="card-title text-italics">Job posts : <%= @company.posts.count%> </h5>
                        </div>
                        <div class="card-body">
                            <h6> email    : <%= @company.email%></h6>
                            <hr>
                            <% if logged_in? && (@company == current_user )%>
                                <%= link_to 'View Profile', company_path(@company), {:class=>"btn btn-outline-success"} %>
                                <%= link_to 'Edit Profile', edit_company_path(@company), {:class=>"btn btn-outline-info"}%>
                                <%= button_to 'Delete Profile', company_path(@company), method: "delete", data: { confirm: 'Are you sure?'} , class: "btn btn-outline-danger" %>
                            <%end%>
                        </div> 
                        <div class="card-footer text-muted">
                            <small> Account created <%=time_ago_in_words(@company.created_at)%> ago, Edited <%=time_ago_in_words(@company.updated_at)%> </small>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>   
    </div>
    
</div>

<h3 class="text-center">Your Job Posts</h3>
<div class="text-center">
    <%= link_to 'Create a Job Post', new_post_path, { :class => "btn btn-primary"}%>
</div>

<div class="container p-3">
    
    <table class="table table-bordered border-primary table-hover">
        <thead class="table-dark"> 
            <tr>
            <th scope="col"> Job Name </th>
            <th scope="col"> Description </th>
            <th scope="col"> Skills </th>
            <th scope="col"> Candidates Matched </th>
            <th scope="col"> Actions </th>
            </tr>
        </thead>
        <tbody>
            <% @posts.each do |post| %>
                <tr>
                    <td > <%= post.name%> </th>
                    <td > <%= truncate(post.description, length: 15)%>...</th>
                    <td >
                        <% if post.skills.any? %>
                            &bull;
                            <% s=  Skill.where(id: post.skills) %>
                            <% s.each do |skill| %>
                                <%=skill.name %> &bull;
                            <%end%>
                        <% else %>
                            <strong>No skills Required </strong>
                        <% end %>
                    </td>
                    <td > <%= post.applicants.count %> Candidates Matched</td>
                    <td> 
                        <%= link_to 'Show', post_path(post), {:class=>"btn btn-success btn-sm"} %>
                        <% if logged_in? && ( post.company == current_user ) %>
                            <%= link_to 'Edit', edit_post_path(post), {:class=>"btn btn-sm btn-info"}%> 
                            <%= button_to 'Delete', post_path(post), {method: :delete , :class=>"btn btn-sm btn-danger"}%>
                        <%end%>
                    </td>
                </tr>
            <% end %>
        </tbody>
        </table>
</div>